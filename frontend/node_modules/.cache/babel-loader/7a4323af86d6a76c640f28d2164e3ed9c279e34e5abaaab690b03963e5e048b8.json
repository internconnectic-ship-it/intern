{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import Header from'../../components/Header';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DashboardInstructorAssign=()=>{const[students,setStudents]=useState([]);const[supervisors,setSupervisors]=useState([]);useEffect(()=>{fetchStudents();fetchSupervisors();},[]);const fetchStudents=async()=>{try{const res=await axios.get('http://localhost:5000/api/instructor/confirmed-students');setStudents(res.data);}catch(err){console.error(\"❌ ดึงข้อมูลนิสิตล้มเหลว:\",err);}};const fetchSupervisors=async()=>{try{const res=await axios.get('http://localhost:5000/api/instructor/all');setSupervisors(res.data);}catch(err){console.error(\"❌ ดึงรายชื่อ supervisor ล้มเหลว:\",err);}};const handleSelectInstructor=async(studentId,instructorId)=>{try{await axios.post('http://localhost:5000/api/instructor/assign-instructor',{student_id:studentId,instructor_id:instructorId});console.log(\"✅ จับคู่ supervisor สำเร็จ\");fetchStudents();}catch(err){console.error(\"❌ จับคู่ supervisor ล้มเหลว:\",err);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-[#9AE5F2] font-sans\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-[5%] py-[2%]\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-extrabold text-[#130347] mb-6\",children:\"\\u0E23\\u0E32\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E19\\u0E34\\u0E2A\\u0E34\\u0E15\\u0E17\\u0E35\\u0E48\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E08\\u0E31\\u0E1A\\u0E04\\u0E39\\u0E48\\u0E2D\\u0E32\\u0E08\\u0E32\\u0E23\\u0E22\\u0E4C\\u0E19\\u0E34\\u0E40\\u0E17\\u0E28\"}),students.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-[#465d71]\",children:\"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E19\\u0E34\\u0E2A\\u0E34\\u0E15\"}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:students.map(student=>{var _student$company_prov;return/*#__PURE__*/_jsxs(\"div\",{className:\"relative bg-white text-[#130347] px-[5%] py-[4%] rounded-2xl shadow-md flex flex-row items-start gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-3 right-3 w-[45%] md:w-[40%]\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"p-2 border rounded-lg w-full bg-white shadow-sm focus:ring-2 focus:ring-[#4691D3]\",value:student.supervisor_id||'',onChange:e=>handleSelectInstructor(student.student_id,e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,hidden:true,children:\"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2D\\u0E32\\u0E08\\u0E32\\u0E23\\u0E22\\u0E4C\\u0E19\\u0E34\\u0E40\\u0E17\\u0E28\"}),supervisors.map(sup=>/*#__PURE__*/_jsx(\"option\",{value:sup.supervisor_id,children:sup.supervisor_name},sup.supervisor_id))]})}),/*#__PURE__*/_jsx(\"img\",{src:`http://localhost:5000/uploads/${student.profile_image||'default-profile.png'}`,alt:student.student_name,className:\"w-24 h-24 object-cover rounded-full border-4 border-[#9AE5F2] shadow\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 space-y-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold\",children:student.student_name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E19\\u0E34\\u0E2A\\u0E34\\u0E15: \",student.student_id]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"\\u0E2D\\u0E32\\u0E22\\u0E38: \",student.age,\" | \\u0E40\\u0E1E\\u0E28: \",student.gender]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"\\u0E40\\u0E1A\\u0E2D\\u0E23\\u0E4C\\u0E42\\u0E17\\u0E23: \",student.phone_number]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"\\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25: \",student.email]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"\\u0E1A\\u0E23\\u0E34\\u0E29\\u0E31\\u0E17\\u0E17\\u0E35\\u0E48\\u0E44\\u0E1B\\u0E1D\\u0E36\\u0E01\\u0E07\\u0E32\\u0E19: \",student.company_name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"\\u0E08\\u0E31\\u0E07\\u0E2B\\u0E27\\u0E31\\u0E14\\u0E17\\u0E35\\u0E48\\u0E1D\\u0E36\\u0E01\\u0E07\\u0E32\\u0E19: \",((_student$company_prov=student.company_province)===null||_student$company_prov===void 0?void 0:_student$company_prov.trim())||\"ไม่ทราบจังหวัด\"]}),student.supervisor_name&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-green-700 font-semibold mt-2\",children:[\"\\u2705 \\u0E2D\\u0E32\\u0E08\\u0E32\\u0E23\\u0E22\\u0E4C\\u0E17\\u0E35\\u0E48\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E44\\u0E27\\u0E49: \",student.supervisor_name]})]})]},student.student_id);})})]})]});};export default DashboardInstructorAssign;","map":{"version":3,"names":["React","useEffect","useState","axios","Header","jsx","_jsx","jsxs","_jsxs","DashboardInstructorAssign","students","setStudents","supervisors","setSupervisors","fetchStudents","fetchSupervisors","res","get","data","err","console","error","handleSelectInstructor","studentId","instructorId","post","student_id","instructor_id","log","className","children","length","map","student","_student$company_prov","value","supervisor_id","onChange","e","target","disabled","hidden","sup","supervisor_name","src","profile_image","alt","student_name","age","gender","phone_number","email","company_name","company_province","trim"],"sources":["D:/New folder/internconnect/frontend/src/pages/dashboard/DashboardInstructorAssign.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport Header from '../../components/Header';\r\n\r\nconst DashboardInstructorAssign = () => {\r\n  const [students, setStudents] = useState([]);\r\n  const [supervisors, setSupervisors] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchStudents();\r\n    fetchSupervisors();\r\n  }, []);\r\n\r\n  const fetchStudents = async () => {\r\n    try {\r\n      const res = await axios.get('http://localhost:5000/api/instructor/confirmed-students');\r\n      setStudents(res.data);\r\n    } catch (err) {\r\n      console.error(\"❌ ดึงข้อมูลนิสิตล้มเหลว:\", err);\r\n    }\r\n  };\r\n\r\n  const fetchSupervisors = async () => {\r\n    try {\r\n      const res = await axios.get('http://localhost:5000/api/instructor/all');\r\n      setSupervisors(res.data);\r\n    } catch (err) {\r\n      console.error(\"❌ ดึงรายชื่อ supervisor ล้มเหลว:\", err);\r\n    }\r\n  };\r\n\r\n  const handleSelectInstructor = async (studentId, instructorId) => {\r\n    try {\r\n      await axios.post('http://localhost:5000/api/instructor/assign-instructor', {\r\n        student_id: studentId,\r\n        instructor_id: instructorId,\r\n      });\r\n      console.log(\"✅ จับคู่ supervisor สำเร็จ\");\r\n      fetchStudents();\r\n    } catch (err) {\r\n      console.error(\"❌ จับคู่ supervisor ล้มเหลว:\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#9AE5F2] font-sans\">\r\n      <Header />\r\n\r\n      <div className=\"px-[5%] py-[2%]\">\r\n        <h2 className=\"text-2xl font-extrabold text-[#130347] mb-6\">\r\n          รายชื่อนิสิตที่ต้องจับคู่อาจารย์นิเทศ\r\n        </h2>\r\n\r\n        {students.length === 0 ? (\r\n          <p className=\"text-[#465d71]\">ไม่มีข้อมูลนิสิต</p>\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {students.map((student) => (\r\n          <div\r\n            key={student.student_id}\r\n            className=\"relative bg-white text-[#130347] px-[5%] py-[4%] rounded-2xl shadow-md flex flex-row items-start gap-6\"\r\n          >\r\n            {/* ดรอปดาวน์ขวาบน */}\r\n            <div className=\"absolute top-3 right-3 w-[45%] md:w-[40%]\">\r\n              <select\r\n                className=\"p-2 border rounded-lg w-full bg-white shadow-sm focus:ring-2 focus:ring-[#4691D3]\"\r\n                value={student.supervisor_id || ''}\r\n                onChange={(e) =>\r\n                  handleSelectInstructor(student.student_id, e.target.value)\r\n                }\r\n              >\r\n                <option value=\"\" disabled hidden>เลือกอาจารย์นิเทศ</option>\r\n                {supervisors.map((sup) => (\r\n                  <option key={sup.supervisor_id} value={sup.supervisor_id}>\r\n                    {sup.supervisor_name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            {/* รูปนิสิต (ซ้ายบน) */}\r\n            <img\r\n              src={`http://localhost:5000/uploads/${student.profile_image || 'default-profile.png'}`}\r\n              alt={student.student_name}\r\n              className=\"w-24 h-24 object-cover rounded-full border-4 border-[#9AE5F2] shadow\"\r\n            />\r\n\r\n            {/* ข้อมูลนิสิต */}\r\n            <div className=\"flex-1 space-y-1\">\r\n              <p className=\"text-lg font-bold\">{student.student_name}</p>\r\n              <p className=\"text-sm\">รหัสนิสิต: {student.student_id}</p>\r\n              <p className=\"text-sm\">อายุ: {student.age} | เพศ: {student.gender}</p>\r\n              <p className=\"text-sm\">เบอร์โทร: {student.phone_number}</p>\r\n              <p className=\"text-sm\">อีเมล: {student.email}</p>\r\n              <p className=\"text-sm\">บริษัทที่ไปฝึกงาน: {student.company_name}</p>\r\n              <p className=\"text-sm\">\r\n                จังหวัดที่ฝึกงาน: {student.company_province?.trim() || \"ไม่ทราบจังหวัด\"}\r\n              </p>\r\n\r\n              {student.supervisor_name && (\r\n                <p className=\"text-green-700 font-semibold mt-2\">\r\n                  ✅ อาจารย์ที่เลือกไว้: {student.supervisor_name}\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DashboardInstructorAssign;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}