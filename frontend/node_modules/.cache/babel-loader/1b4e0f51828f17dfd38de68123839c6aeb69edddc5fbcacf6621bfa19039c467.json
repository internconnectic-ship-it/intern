{"ast":null,"code":"import{useNavigate}from'react-router-dom';import{useEffect,useState}from'react';import axios from'axios';import StudentMenu from'./headers/StudentMenu';import CompanyMenu from'./headers/CompanyMenu';import InstructorMenu from'./headers/InstructorMenu';import AdminMenu from'./headers/AdminMenu';import SupervisorMenu from'./headers/SupervisorMenu';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Header=()=>{const role=localStorage.getItem(\"role\");const userId=localStorage.getItem(`${role}Id`);const[profileImage,setProfileImage]=useState(\"default-profile.png\");const[userName,setUserName]=useState(\"ผู้ใช้\");const navigate=useNavigate();useEffect(()=>{if(role&&userId){axios.get(`http://localhost:5000/api/${role}/${userId}`).then(res=>{const data=res.data;// ✅ ดึงรูปภาพ\nconst image=role===\"company\"?data.company_logo:data.profile_image;// ✅ ดึงชื่อ\nconst name=role===\"company\"?data.company_name:role===\"student\"?data.student_name:role===\"instructor\"?data.Instructor_name:role===\"supervisor\"?data.supervisor_name:role===\"admin\"?data.admin_name:\"ผู้ใช้\";setProfileImage(image||\"default-profile.png\");setUserName(name||\"ผู้ใช้\");}).catch(err=>{console.error(\"โหลดข้อมูลผู้ใช้ล้มเหลว:\",err);setProfileImage(\"default-profile.png\");});}},[role,userId]);const handleLogout=()=>{localStorage.clear();navigate(\"/login\");};const renderMenuByRole=()=>{switch(role){case\"student\":return/*#__PURE__*/_jsx(StudentMenu,{});case\"company\":return/*#__PURE__*/_jsx(CompanyMenu,{});case\"instructor\":return/*#__PURE__*/_jsx(InstructorMenu,{});case\"supervisor\":return/*#__PURE__*/_jsx(SupervisorMenu,{});case\"admin\":return/*#__PURE__*/_jsx(AdminMenu,{});default:return null;}};return/*#__PURE__*/_jsxs(\"nav\",{className:\"bg-white text-indigo-700 shadow-md px-6 py-4 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-6 font-medium text-lg\",children:renderMenuByRole()}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"img\",{src:`http://localhost:5000/uploads/${profileImage}`,alt:\"profile\",className:\"profile-image\",width:\"64\",height:\"64\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:userName})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"px-3 py-1 border border-gray-400 rounded hover:bg-red-100 text-sm\",children:\"\\u0E2D\\u0E2D\\u0E01\\u0E08\\u0E32\\u0E01\\u0E23\\u0E30\\u0E1A\\u0E1A\"})]})]});};export default Header;","map":{"version":3,"names":["useNavigate","useEffect","useState","axios","StudentMenu","CompanyMenu","InstructorMenu","AdminMenu","SupervisorMenu","jsx","_jsx","jsxs","_jsxs","Header","role","localStorage","getItem","userId","profileImage","setProfileImage","userName","setUserName","navigate","get","then","res","data","image","company_logo","profile_image","name","company_name","student_name","Instructor_name","supervisor_name","admin_name","catch","err","console","error","handleLogout","clear","renderMenuByRole","className","children","src","alt","width","height","onClick"],"sources":["D:/New folder/internconnect/frontend/src/components/Header.js"],"sourcesContent":["import { useNavigate } from 'react-router-dom';\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nimport StudentMenu from './headers/StudentMenu';\r\nimport CompanyMenu from './headers/CompanyMenu';\r\nimport InstructorMenu from './headers/InstructorMenu';\r\nimport AdminMenu from './headers/AdminMenu';\r\nimport SupervisorMenu from './headers/SupervisorMenu';\r\n\r\nconst Header = () => {\r\n  const role = localStorage.getItem(\"role\");\r\n  const userId = localStorage.getItem(`${role}Id`);\r\n  const [profileImage, setProfileImage] = useState(\"default-profile.png\");\r\n  const [userName, setUserName] = useState(\"ผู้ใช้\");\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (role && userId) {\r\n      axios.get(`http://localhost:5000/api/${role}/${userId}`)\r\n        .then(res => {\r\n          const data = res.data;\r\n\r\n          // ✅ ดึงรูปภาพ\r\n          const image =\r\n            role === \"company\" ? data.company_logo :\r\n            data.profile_image;\r\n\r\n          // ✅ ดึงชื่อ\r\n          const name =\r\n            role === \"company\" ? data.company_name :\r\n            role === \"student\" ? data.student_name :\r\n            role === \"instructor\" ? data.Instructor_name :\r\n            role === \"supervisor\" ? data.supervisor_name :\r\n            role === \"admin\" ? data.admin_name :\r\n            \"ผู้ใช้\";\r\n\r\n          setProfileImage(image || \"default-profile.png\");\r\n          setUserName(name || \"ผู้ใช้\");\r\n        })\r\n        .catch(err => {\r\n          console.error(\"โหลดข้อมูลผู้ใช้ล้มเหลว:\", err);\r\n          setProfileImage(\"default-profile.png\");\r\n        });\r\n    }\r\n  }, [role, userId]);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.clear();\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  const renderMenuByRole = () => {\r\n    switch (role) {\r\n      case \"student\":\r\n        return <StudentMenu />;\r\n      case \"company\":\r\n        return <CompanyMenu />;\r\n      case \"instructor\":\r\n        return <InstructorMenu />;\r\n      case \"supervisor\":\r\n        return <SupervisorMenu />;\r\n      case \"admin\":\r\n        return <AdminMenu />;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <nav className=\"bg-white text-indigo-700 shadow-md px-6 py-4 flex justify-between items-center\">\r\n      {/* เมนูฝั่งซ้าย */}\r\n      <div className=\"flex gap-6 font-medium text-lg\">\r\n        {renderMenuByRole()}\r\n      </div>\r\n\r\n      {/* ข้อมูลผู้ใช้ฝั่งขวา */}\r\n      <div className=\"flex items-center gap-4\">\r\n        <span className=\"flex items-center gap-2\">\r\n          <img\r\n            src={`http://localhost:5000/uploads/${profileImage}`}\r\n            alt=\"profile\"\r\n            className=\"profile-image\"\r\n            width=\"64\"\r\n            height=\"64\"\r\n          />\r\n          <span className=\"text-sm\">{userName}</span>\r\n        </span>\r\n        <button\r\n          onClick={handleLogout}\r\n          className=\"px-3 py-1 border border-gray-400 rounded hover:bg-red-100 text-sm\"\r\n        >\r\n          ออกจากระบบ\r\n        </button>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}